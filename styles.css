/* Global */
:root{
  --text:#e9f0ff; --bg:#050b1c; --card:#0a1430cc; --border:#2b3b6a66;
  --btn: linear-gradient(180deg,#5a8bff,#2248ff);
  --btn2: linear-gradient(180deg,#ffe082,#ffb703);
  --waterline: 0.62;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;color:var(--text);background:#000;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
.page-bg{position:fixed;inset:0;background:#000 url('assets/bg-temple.png') center/cover no-repeat;z-index:-5;
  animation:slowPan 60s linear infinite alternate;filter:brightness(.92)}
@keyframes slowPan{from{background-position:52% 48%}to{background-position:48% 52%}}

.topbar{position:sticky;top:0;z-index:50;background:#020619cc;border-bottom:1px solid #ffffff16;
  padding:18px 22px;display:flex;align-items:center;justify-content:space-between;backdrop-filter:blur(8px)}
.brand{display:flex;align-items:center;gap:16px}
.logo{width:84px;height:84px;object-fit:contain}
.title h1{margin:0;line-height:1.1;font-size:clamp(28px,5vw,48px);text-shadow:0 0 14px #7cc3ff80,0 0 30px #4dbaff40}
.title small{display:block;font-size:clamp(18px,3.2vw,26px);font-weight:800;opacity:.98}
.nav a{color:#cfe1ff;text-decoration:none;margin-left:16px;font-weight:600}
.nav a:hover{color:#fff}

.container{max-width:1100px;margin:26px auto;padding:0 18px}
.card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:18px;box-shadow:0 10px 30px #0006}
.hint{opacity:.85}.foot{text-align:center;padding:26px;opacity:.78}

.picker{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:12px}
.wish{flex:1;min-width:280px;padding:16px 18px;border-radius:12px;border:1px solid #224;background:#030a24;color:#fff;font-size:18px}
.btn{padding:13px 20px;border-radius:999px;border:1px solid #224;background:var(--btn);color:#fff;font-weight:800;font-size:18px}
.btn.alt{background:var(--btn2);color:#111}

/* Bigger krathong picker */
.krathong-choices{display:flex;gap:14px;flex-wrap:wrap;margin:.35rem 0 .6rem}
.krathong-choices.large .kbtn{background:#071234;border:1px solid #2a3e88;border-radius:18px;width:150px;height:150px;display:grid;place-items:center;font-size:0;cursor:pointer}
.krathong-choices.large .kbtn img{width:118px;height:118px;object-fit:contain}
.kbtn.active{outline:3px solid #87cefa}

/* River */
#river{position:relative;margin:20px 0;height:clamp(360px,56vh,580px);border-radius:18px;border:1px solid var(--border);
  overflow:hidden;background:linear-gradient(180deg,#0b2a5acc,#061943ee 65%,#05102ccc);
  box-shadow:inset 0 0 60px #0006,0 20px 40px #0006}
#river .scene-inriver{position:absolute;inset:0;background:url('assets/bg-inriver-2.png') center bottom/cover no-repeat;z-index:-1;
  opacity:.98;animation:scenePan 80s linear infinite alternate;filter:saturate(1.06) brightness(1.05)}
@keyframes scenePan{0%{background-position:52% bottom}50%{background-position:48% bottom}100%{background-position:52% bottom}}

#river .scene-inriver .moon-glow{position:absolute;inset:0;z-index:1;pointer-events:none;
  background:radial-gradient(420px 260px at 50% 36%,rgba(255,245,180,.65),rgba(255,245,180,0) 60%),
             radial-gradient(600px 360px at 50% 36%,rgba(255,220,120,.25),rgba(255,220,120,0) 60%);
  mix-blend-mode:screen;animation:moonPulse 6s ease-in-out infinite}
@keyframes moonPulse{0%,100%{opacity:.7}50%{opacity:.95}}

.waterfx{position:absolute;inset:0;z-index:1;pointer-events:none}
.waterfx::before,.waterfx::after{content:"";position:absolute;left:-10%;right:-10%;height:65%;bottom:-5%;
  background:radial-gradient(ellipse at 50% 10%,rgba(255,255,255,.16),rgba(255,255,255,0) 60%);
  mix-blend-mode:overlay;filter:blur(8px);opacity:.44;animation:wave1 24s ease-in-out infinite}
.waterfx::after{height:70%;opacity:.32;filter:blur(12px);animation:wave2 32s ease-in-out infinite}
@keyframes wave1{0%,100%{transform:translateX(-3%) translateY(0)}50%{transform:translateX(3%) translateY(-1.5%)}}
@keyframes wave2{0%,100%{transform:translateX(3%)}50%{transform:translateX(-3%)}}

/* Floating area & krathong */
.float-area{position:absolute;inset:0;z-index:2;overflow:hidden}
.krathong{position:absolute;will-change:transform}
.krathong img{display:block;height:clamp(92px,12vh,142px)}

/* Fireworks */
.fireworks{position:absolute;inset:0;z-index:3;pointer-events:none}
.fw{position:absolute;width:2px;height:2px;background:#fff;border-radius:50%;box-shadow:0 0 8px 2px rgba(255,255,255,.9);animation:fw-burst 900ms ease-out forwards}
@keyframes fw-burst{0%{transform:translate(0,0) scale(0);opacity:1}80%{opacity:1}100%{transform:var(--tr) scale(.9);opacity:0}}

/* Share bar */
.sharebar{display:flex;align-items:center;justify-content:center}
.share-wrap{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.sbtn{padding:10px 16px;border-radius:999px;border:1px solid #2a3e88;background:#0b1b44;color:#d7e6ff;font-weight:800}
.sbtn.fb{background:#1877f2;color:#fff}.sbtn.line{background:#06c755;color:#042}.sbtn.x{background:#1b1f23;color:#fff}.sbtn.tiktok{background:#121212;color:#fff}.sbtn.copy{background:#ffe082;color:#111}

/* Light Mode */
@media (prefers-color-scheme: light){
  :root{ --text:#0f1a2f; --card:#ffffffcc; --border:#cfe0ff; }
  body{background:#eaf2ff;color:var(--text)}
  .topbar{background:#ffffffcc;border-bottom:1px solid #d9e6ff}
  .nav a{color:#274b9c}
  #river{background:linear-gradient(180deg,#bfe3ffcc,#8fc3ffcc 65%,#6aa5ffcc);box-shadow:inset 0 0 40px #6aa5ff55,0 10px 30px #6aa5ff55}
}

/* Theme by time */
:root[data-time-theme="evening"] .page-bg::after{
  content:"";position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(1200px 500px at 60% 0%,#0db3a966,transparent 60%),
             radial-gradient(900px 400px at 10% 20%,#7ce2a933,transparent 60%),
             radial-gradient(900px 400px at 90% 30%,#00f5d433,transparent 60%);
  mix-blend-mode:screen;
}
:root[data-time-theme="late"] .page-bg::after{
  content:"";position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(1200px 500px at 60% 0%,#7a2bd066,transparent 60%),
             radial-gradient(900px 400px at 15% 25%,#ff79c633,transparent 60%),
             radial-gradient(900px 400px at 85% 30%,#9b5de533,transparent 60%);
  mix-blend-mode:screen;
}

/* Mobile waterline */
@media (max-width:520px){
  .logo{width:76px;height:76px}
  .krathong-choices.large .kbtn{width:140px;height:140px}.krathong-choices.large .kbtn img{width:110px;height:110px}
  :root{ --waterline: 0.645; }
}
